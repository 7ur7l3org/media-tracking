<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>ueueðŸ«µ - Wikidata Media Tracker - Media</title>
  <!-- Load theme.js synchronously to set data-theme before CSS loads -->
  <meta name="color-scheme" content="setme">
  <script>
    function applyTheme(theme) {
      metaColorSchemes = {
        light: "light",
        dark: "dark"
      };
      const systemTheme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "dark" : "light";
      theme = theme ? theme : systemTheme;
      const colorScheme = theme in metaColorSchemes ? metaColorSchemes[theme] : systemTheme;
      
      document.documentElement.setAttribute("data-theme", theme)
      document.querySelector('meta[name="color-scheme"]').content = colorScheme;
    }
    applyTheme(localStorage.getItem("theme"));
  </script>
  <script src="js/theme.js"></script>
  <link rel="stylesheet" href="styles.css">
  <!-- External libraries for Git operations -->
  <script src="external/@isomorphic-git_lightning-fs@4.6.0_dist_lightning-fs.min.js"></script>
  <script src="external/isomorphic-git@1.29.0_index.umd.min.js"></script>
  <script src="external/isomorphic-git@1.29.0_http_web_index.umd.js"></script>
  <!-- Other JS scripts (all deferred to after http is imported) -->
  <script src="js/auth.js" defer></script>
  <script src="js/git-sync.js" defer></script>
  <script src="js/cache.js" defer></script>
  <script src="js/wikidata.js" defer></script>
  <script src="js/formatters.js" defer></script>
  <script src="js/series.js" defer></script>
  <script src="js/rendering.js" defer></script>
  <script src="js/backend.js" defer></script>
  <script src="js/search.js" defer></script>
  <script src="js/main.js" defer></script>
</head>
<body>
  <!-- Header with navigation -->
  <header class="site-header">
    <div class="site-title">ueueðŸ«µ - Wikidata Media Tracker</div>
    <span id="branchIndicator"></span>
    <nav class="site-nav">
      [<a href="index.html" class="active">Media</a>]
      [<a href="queues.html">Queues</a>]
      [<a href="consumptions.html">Consumptions</a>]
    </nav>
  </header>

  <!-- Search Section -->
  <details id="searchDetails" open>
    <summary>
      Search:
      <input type="text" id="searchInput" placeholder="Search Wikidata...">
      <button id="searchButton">Search</button>
    </summary>
    <section id="searchSection" class="result">
      <div id="paginationControls"></div>
      <div id="pageInfo"></div>
      <div id="searchResults"></div>
    </section>
  </details>

  <!-- Git Sync Status (moved up for prominence) -->
  <div id="gitSyncStatus" class="git-sync-status"></div>

  <!-- Entity Info Display -->
  <section id="infoDisplay" class="result"></section>

  <!-- Footer showing authentication info and Git log -->
  <footer class="git-info">
    <div id="authFooter"></div>
    <details id="gitLog" open>
      <summary>Git Operations Log</summary>
      <pre id="gitLogContent"></pre>
    </details>
  </footer>
</body>
</html>
